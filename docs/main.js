(()=>{var m=class{constructor(t,e,i,n,x,p){this.name=t,this.speed=50,this.positionX=200,this.positionY=n,this.targetY=n,this.movementTimer=0,this.context=i,this.color=e,this.upKeyCode=x,this.downKeyCode=p,this.trail=[{x:0,y:n}]}maxedOutMovement(){return this.movementTimer>0}moveUp(){this.maxedOutMovement()||(this.movementTimer=.25,this.targetY=this.targetY-10)}moveDown(){this.maxedOutMovement()||(this.movementTimer=.25,this.targetY=this.targetY+10)}update(t){this.trail.push({x:this.positionX,y:this.positionY}),this.positionX=this.positionX+this.speed*t;let e;Math.abs(this.targetY-this.positionY)>0?(e=(this.speed-30)*(Math.cos(this.movementTimer/.25*Math.PI)+1),this.targetY-this.positionY>0?this.positionY=Math.min(this.targetY,this.positionY+e*t):this.positionY=Math.max(this.targetY,this.positionY-e*t)):e=this.speed,this.positionX=this.positionX+e*t,this.movementTimer>0&&(this.movementTimer=this.movementTimer-t)}draw(t,e){this.context.resetTransform(),this.drawTrail(t,e)}drawTrail(t,e){this.cutTrail(t);let i=this.context;i.beginPath(),i.lineWidth=2*e.yScale,i.moveTo((this.trail[0].x-t)*e.xScale,this.trail[0].y*e.yScale);for(let n of this.trail)i.lineTo((n.x-t)*e.xScale,n.y*e.yScale);i.strokeStyle=this.color,i.stroke()}cutTrail(t){this.trail=this.trail.filter(e=>e.x>=t-200)}};var f=class{constructor(t){this.end=4300;this.squares=[{x:0,y:0,size:50},{x:0,y:400,size:50},{x:200,y:400,size:50},{x:200,y:0,size:50},{x:400,y:400,size:50},{x:400,y:0,size:50},{x:600,y:400,size:50},{x:600,y:0,size:50},{x:800,y:400,size:50},{x:800,y:0,size:50},{x:1e3,y:400,size:50},{x:1e3,y:0,size:50},{x:1200,y:400,size:50},{x:1200,y:0,size:50},{x:1400,y:400,size:50},{x:1400,y:0,size:50},{x:1600,y:400,size:50},{x:1600,y:0,size:50},{x:1620,y:200,size:50},{x:1800,y:400,size:50},{x:1800,y:0,size:50},{x:2e3,y:400,size:50},{x:2e3,y:0,size:50},{x:2200,y:0,size:50},{x:2200,y:400,size:50},{x:2400,y:0,size:100},{x:2400,y:400,size:100},{x:2600,y:200,size:50},{x:2600,y:0,size:100},{x:2600,y:400,size:100},{x:2750,y:320,size:80},{x:2750,y:200,size:80},{x:2750,y:80,size:80},{x:2900,y:400,size:100},{x:2900,y:200,size:100},{x:2900,y:0,size:100},{x:3300,y:0,size:350},{x:3300,y:400,size:350},{x:3800,y:200,size:150},{x:3800,y:0,size:150},{x:3800,y:400,size:150}];this.context=t}collide(t,e){for(let i of this.squares){let n=i.x-i.size/2;if(t>=n&&t<=n+i.size){let x=i.y-i.size/2;if(e>=x&&e<=x+i.size)return!0}}return!1}finish(t){return t>=this.end}draw(t,e){let i=this.context;i.lineWidth=2*e.yScale;for(let n of this.squares){let x=n.x-n.size/2-t,p=n.y-n.size/2;i.strokeStyle="white",i.strokeRect(x*e.xScale,p*e.yScale,n.size*e.xScale,n.size*e.yScale)}t<2500&&(i.font=`${30*e.yScale}px sans-serif`,i.textAlign="left",i.fillStyle="green",i.fillText("Left is green",(400-t)*e.xScale,300*e.yScale),i.fillText("Use 'w' and 's' to move",(800-t)*e.xScale,300*e.yScale),i.fillStyle="orange",i.fillText("Right is orange",(400-t)*e.xScale,130*e.yScale),i.fillText("Use 'up' and 'down' to move",(800-t)*e.xScale,130*e.yScale),i.fillStyle="grey",i.fillText("avoid the squares =>",(1300-t)*e.xScale,210*e.yScale),i.fillStyle="grey",i.fillText("get to finish first!",(1900-t)*e.xScale,210*e.yScale),i.beginPath(),i.moveTo((2400-t)*e.xScale,50*e.yScale),i.lineTo((2400-t)*e.xScale,350*e.yScale),i.strokeStyle="grey",i.stroke()),i.beginPath(),i.moveTo((4300-t)*e.xScale,0*e.yScale),i.lineTo((4300-t)*e.xScale,400*e.yScale),i.strokeStyle="grey",i.stroke()}};var h,s,y,c,u,g=!1,b,z=!1,S,d=0,o,l;function a(){return{xScale:o/400,yScale:l/400}}function C(){if(s.resetTransform(),g){s.fillStyle="red",s.fillRect(0,0,o,l),s.font=`${30*a().yScale}px sans-serif`,s.textAlign="center",s.fillStyle="black",s.fillText(`\u{1F648} ${b} lost`,200*a().xScale,200*a().yScale);return}if(z){s.fillStyle="green",s.fillRect(0,0,o,l),s.font=`${30*a().yScale}px sans-serif`,s.textAlign="center",s.fillStyle="black",s.fillText(`\u{1F680} ${S} won`,200*a().xScale,200*a().yScale);return}s.clearRect(0,0,o,l),s.fillStyle="black",s.fillRect(0,0,o,l);for(let r of y)r.draw(c,a());u.draw(c,a())}function Y(r){if(g||z)return;for(let e of y)e.update(r);c=y.reduce((e,i)=>e+i.positionX,0)/y.length-200;for(let e of y)u.collide(e.positionX,e.positionY)&&(g=!0,b=e.name);for(let e of y)u.finish(e.positionX)&&(z=!0,S=e.name)}function T(r){let t=r-d;d=r,Y(t/1e3),C(),window.requestAnimationFrame(T)}function v(){let r=window.innerWidth,t=window.innerHeight;console.log(o,l),r>t?(o=t,l=t):(o=r,l=r),h.width=o,h.height=l}function D(r){for(let t of y)r.code==t.upKeyCode&&t.moveUp(),r.code==t.downKeyCode&&t.moveDown()}function k(){h=document.getElementById("canvas"),o=h.width,l=h.height,c=200,s=h.getContext("2d"),window.addEventListener("keydown",D),window.addEventListener("resize",v),v(),y=[new m("right player","orange",s,190,"ArrowUp","ArrowDown"),new m("left player","green",s,210,"KeyW","KeyS")],u=new f(s),T(performance.now())}k();})();
//# sourceMappingURL=main.js.map
